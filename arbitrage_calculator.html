<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ¯ LOFåŸºé‡‘å¥—åˆ©è®¡ç®—å™¨ï¼ˆæ™®é€šLOFä¸“ç”¨ï¼‰</title>
    <style>
        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, 'Microsoft YaHei', sans-serif;
            max-width: 100vw;
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.5;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 20px;
            margin-bottom: 20px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 1.4rem;
            margin-top: 0;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        .note {
            background-color: #fff8e6;
            border-left: 4px solid #ffc107;
            padding: 12px;
            border-radius: 0 4px 4px 0;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #34495e;
            font-size: 0.95rem;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            background-color: #fff;
        }
        button {
            background: linear-gradient(to right, #4CAF50, #388E3C);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 14px;
            font-size: 1.1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(76, 175, 80, 0.3);
        }
        button:active {
            transform: scale(0.98);
            box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
        }
        .result {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #4CAF50;
        }
        .result p {
            margin: 8px 0;
            font-size: 1rem;
        }
        .highlight {
            font-weight: bold;
            color: #c0392b;
        }
        .small-red-text {
            font-size: 0.85rem;
            color: #c0392b;
            margin-top: 10px;
            padding-left: 8px;
            border-left: 2px solid #e74c3c;
        }
        .small-red-text strong {
            color: #c0392b;
        }
        .profit-positive {
            color: #27ae60;
            font-weight: bold;
        }
        .profit-negative {
            color: #e74c3c;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ¯ LOFåŸºé‡‘å¥—åˆ©è®¡ç®—å™¨ï¼ˆæ™®é€šLOFä¸“ç”¨ï¼‰</h1>
        <p class="subtitle">åŸºäºåœºå†…ç”³è´­ï¼ˆTæ—¥ï¼‰â†’ äºŒçº§å¸‚åœºå–å‡ºï¼ˆT+2æ—¥ï¼‰çš„å¥—åˆ©é€»è¾‘</p>
        
        <div class="note">
            <strong>é‡è¦æé†’ï¼š</strong> æœ¬è®¡ç®—å™¨é»˜è®¤è®¡ç®—æ™®é€šLOFçš„T+2æ—¥å–å‡ºï¼ˆQDII-LOFéœ€T+3æ—¥å–å‡ºï¼Œè¯´æ˜å·²æ ‡æ³¨ï¼‰ã€‚
        </div>

        <div class="form-group">
            <label for="amount">é™é¢é‡‘é¢ (å…ƒ)</label>
            <input type="number" id="amount" placeholder="ä¾‹å¦‚ï¼š100" value="100" min="1">
        </div>

        <div class="form-group">
            <label for="feeRate">åˆ¸å•†ä½£é‡‘ç‡ (â€°)</label>
            <input type="number" id="feeRate" placeholder="ä¾‹å¦‚ï¼š0.5" value="0.5" step="0.1" min="0.1">
        </div>

        <div class="form-group">
            <label for="minFee">æœ€ä½ä½£é‡‘ (å…ƒ)</label>
            <input type="number" id="minFee" placeholder="ä¾‹å¦‚ï¼š5" value="5" min="1">
        </div>

        <div class="form-group">
            <label for="nav">è®¤è´­æˆåŠŸå‡€å€¼</label>
            <input type="number" id="nav" placeholder="ä¾‹å¦‚ï¼š2.30" value="2.30" step="0.01" min="0.01">
        </div>

        <div class="form-group">
            <label for="price">è®¤è´­æˆåŠŸæ—¥äºŒçº§å¸‚åœºæ”¶ç›˜ä»·</label>
            <input type="number" id="price" placeholder="ä¾‹å¦‚ï¼š2.80" value="2.80" step="0.01" min="0.01">
        </div>

        <button onclick="calculate()">ğŸ“Š è®¡ç®—ä¿æœ¬æ•°æ®</button>

        <div id="result" class="result" style="display: none;">
            <p>è®¤è´­æˆæœ¬ï¼š<span id="cost" class="highlight"></span> å…ƒ</p>
            <p>è¿”è¿˜ç°é‡‘ï¼š<span id="refund" class="highlight"></span> å…ƒ</p>
            <p>å®é™…ä»½é¢ï¼š<span id="shares" class="highlight"></span> ä»½</p>
            <p>å½“å¤©è´¦é¢æº¢ä»·ï¼š<span id="premium" class="highlight"></span> %</p>
            <p class="profit-positive">å½“å¤©å¥—åˆ©æµ®ç›ˆï¼š<span id="profit" class="highlight"></span> å…ƒ</p>
            <p>T+2æ—¥ä¿æœ¬äºŒçº§å¸‚åœºä»·æ ¼ï¼š<span id="breakEven" class="highlight"></span> å…ƒ/ä»½</p>
            <p class="small-red-text">
                è¯´æ˜ï¼šæ­¤è®¡ç®—åŸºäºåœ¨åˆ¸å•†APPä¸­ç›´æ¥æ“ä½œâ€œåœºå†…ç”³è´­â€çš„è·¯å¾„ï¼ˆä»…é€‚ç”¨äº LOF åŸºé‡‘ï¼ŒåŒ…æ‹¬QDII-LOFï¼‰<br><br>
                1ã€ä½¿ç”¨è¯åˆ¸è´¦æˆ·çš„ç°é‡‘ï¼Œåœ¨Tæ—¥è¯åˆ¸APPçš„â€œåœºå†…åŸºé‡‘â€ç•Œé¢ï¼Œé€‰æ‹©â€œç”³è´­â€ä¹°å…¥åŸºé‡‘ä»½é¢ã€‚<br><br>
                2ã€T+2æ—¥ä½¿ç”¨APPçš„è‚¡ç¥¨/åœºå†…åŸºé‡‘äº¤æ˜“ç•Œé¢é€‰æ‹©"å–å‡º"ï¼Œåœ¨äºŒçº§å¸‚åœºå–å‡ºã€‚<br><br>
                3ã€éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ˜¯QDII-LOFåŸºé‡‘çš„åˆ°è´¦æ—¶é—´ä¸ºT+2æ—¥ï¼ŒT+3æ—¥å¯äº¤æ˜“å–å‡ºï¼ˆä¸æ™®é€šLOFä¸åŒï¼‰ã€‚<br><br>
                4ã€ETF åŸºé‡‘æ™®éé‡‡ç”¨ä¸€æ½å­è‚¡ç¥¨ç”³è´­ï¼Œä¸æ”¯æŒç°é‡‘åœºå†…ç”³è´­ï¼Œæœ¬è®¡ç®—å™¨ä¸é€‚ç”¨ã€‚
            </p>
        </div>
    </div>

    <script>
        function calculate() {
            const amount = parseFloat(document.getElementById('amount').value);
            const feeRatePercent = parseFloat(document.getElementById('feeRate').value);
            const minFee = parseFloat(document.getElementById('minFee').value);
            const nav = parseFloat(document.getElementById('nav').value);
            const currentPrice = parseFloat(document.getElementById('price').value);

            if (isNaN(amount) || isNaN(feeRatePercent) || isNaN(minFee) || isNaN(nav)) {
                alert("è¯·å¡«å†™æ‰€æœ‰æ•°å€¼ï¼ˆå¿…é¡»ä¸ºæ•°å­—ï¼‰");
                return;
            }

            if (amount < 1 || feeRatePercent < 0.1 || minFee < 1 || nav <= 0 || currentPrice <= 0) {
                alert("è¯·ç¡®ä¿æ•°å€¼åˆç†ï¼šé‡‘é¢â‰¥1å…ƒï¼Œä½£é‡‘ç‡â‰¥0.1â€°ï¼Œæœ€ä½ä½£é‡‘â‰¥1å…ƒï¼Œå‡€å€¼>0");
                return;
            }

            const feeRate = feeRatePercent / 10000;
            let shares = Math.floor(amount / nav);

            if (shares === 0) {
                alert("é”™è¯¯ï¼šå½“å‰å‡€å€¼è¿‡é«˜ï¼Œé™é¢é‡‘é¢ä¸è¶³è´­ä¹°1ä»½åŸºé‡‘ã€‚");
                return;
            }

            const cost = shares * nav;
            const refund = amount - cost;
            const premiumToday = ((currentPrice - nav) / nav) * 100;
            const profit = shares * (currentPrice - nav); // æ–°å¢ï¼šå½“å¤©å¥—åˆ©æµ®ç›ˆ
            const sellValueEstimate = shares * currentPrice;
            const feeEstimate = Math.max(minFee, sellValueEstimate * feeRate);
            const breakEvenPrice = (cost + feeEstimate) / shares;

            // æ ¹æ®æµ®ç›ˆæ­£è´Ÿè®¾ç½®é¢œè‰²
            const profitElement = document.getElementById('profit');
            if (profit >= 0) {
                profitElement.className = 'highlight profit-positive';
                profitElement.textContent = profit.toFixed(2);
            } else {
                profitElement.className = 'highlight profit-negative';
                profitElement.textContent = profit.toFixed(2);
            }

            document.getElementById('cost').textContent = cost.toFixed(2);
            document.getElementById('refund').textContent = refund.toFixed(2);
            document.getElementById('shares').textContent = shares;
            document.getElementById('premium').textContent = premiumToday.toFixed(2);
            document.getElementById('breakEven').textContent = breakEvenPrice.toFixed(3);

            document.getElementById('result').style.display = 'block';
        }
    </script>
</body>
</html>